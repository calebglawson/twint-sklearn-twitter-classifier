**Twitter deprecated their legacy theme. Unfortunately, this means that scraping Twitter with most tools is completely broken. Twint, the library these scripts use to collect data, was impacted. This will likely not be fixed soon. Alternatives to scraping are being explored. #7**

# Summary
This project trains a machine-learning model to predict whether a user belongs in a targeted class.

**Remember, in order to make quality predictions with a machine learning model, you will need quality data. I have been able to achieve a 94% average accuracy with this tool. With the right input, maybe you can, too.**

Let's say you have a list of golf enthusiast twitter accounts and would like to identify more golf enthusiasts. Instead of manually determining if a given twitter user is a golf enthusiast, you want to train a machine learning model. Let's assume that these golf enthusiasts are a tight-knit group: they follow known golf enthusiasts, they retweet known golf enthusiast's tweets, they like known golf enthusiast's tweets, they mention other known golf enthusiasts frequently. Statistics are gathered to paint a picture of each user's level of engagement with known golf enthusiast twitter accounts.  Once the model is trained on what statistics indicate an account is a golf enthusiast, we can gather the same stats for a new set of users and predict whether or not they are a golf enthusiast.

# Typical Workflow
## If You Do Not Have a Machine Learning Model
1. Have a list of users that belong to the targed class, also known as a watchlist.
2. Obtain a list with an equal number of users that are neutral / do not belong on the watchlist with fetch_followers.py **Example:** ```python fetch_followers.py example_user --filter watchlist.csv --limit 800```
3. Unify the lists to make a new csv.
4. Run model_pipeline.py to gather the data and generate a model. **Example:** ```python model_pipeline.py watchlist.csv --userlist userlist.csv --tweet_watchwords tweet_watchwords.csv --bio_watchwords bio_watchwords.csv```
## Once You Have a Machine Learning Model
1. Have a new list of users whose class is unknown.
2. Run prediction_pipeline.py to gather the data and run predictions against the model. **Example:** ```python prediction_pipeline.py watchlist.csv userlist.joblib --userlist new_list.csv --tweet_watchwords tweet_watchwords.csv --bio_watchwords bio_watchwords.csv```
3. Use the file generated from predict.py to find users of interest. Take a deeper look into an individual user by reviewing their report generated by gather_data.py.

# Required Libraries
* argparse
* joblib
* openpyxl or xlsxwriter
* pandas
* scipy
* sklearn
* twint

# Optional Libraries
* matplotlib
* seaborn

# Additional Recommended Tools
* Anaconda
* Jupyter Notebook
* DB Browser (SQLite)
* LibreOffice Calc or Excel

# File Index
## Scripts
* model_pipeline.py
    * Automated pipeline that combines gather_data and generate_model to build a new, trained model.
* prediction_pipeline.py
    * Automated pipeline that combines gather_data and predict to make predicitons off an existing model.
* ids_to_usernames.py
    * Converts a CSV of user IDs to screen names.
* fetch_followers.py
    * Fetch the followers of a given user ID. Optionally filter and limit results. Outputs CSV.
* gather_data.py
    * From a list of twitter users, gather the twitter data, persist it, and compute stats. Outputs a single SQLite Database the machine learning model and Excel reports for humans.
* generate_model.py
    * From a DB outputted by gather_data.py, generate a machine learning model which will classify twitter users in one of two classes. Outputs .joblib of the model and test results.
* predict.py
    * From a DB outputted by gather_data.py, load a machine learning model outputted by generate_model.py and classify the twitter users. Outputs Excel file of the results.
## Database
* *.db
    * The computed stats outputted by gather_data.py

## CSVs
### (Can be named anything, below names are just examples.)
* watchlist.csv
    * This is a list of the users we want to look for in other user's twitter interactions. Used to compute stats.
* bio_watchwords.csv
    * This is a list of words to watch for in a user's bio. Used to compute stats.
* tweet_watchwords.csv
    * This is a list of words to look for in a user's tweets. Used in data review only.
* userlist.csv
    * This is an example input file for gather_data.py. Contains screen names.

## Other
* *.joblib
    * This is the joblibbed SVC model.
* Visualize.ipynb
    * This is a Jupyter notebook used to visualize the stats db generated by gather_data.py
